# Hyprland Configuration
# Converted from Aerospace config

# ============================================================================
# MONITORS
# ============================================================================
# Configure your monitors here
# Example: monitor=DP-1,1920x1080@60,0x0,1
# Use 'hyprctl monitors' to see available monitors

# ============================================================================
# AUTOSTART
# ============================================================================
exec-once = waybar  # Status bar (you can integrate workspace info here)

# ============================================================================
# ENVIRONMENT VARIABLES
# ============================================================================
env = XCURSOR_SIZE,24

# ============================================================================
# GENERAL SETTINGS
# ============================================================================
general {
    gaps_in = 10              # Inner gaps (between windows)
    gaps_out = 10             # Outer gaps (between windows and monitor edges)
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    layout = dwindle          # default layout
    resize_on_border = true
    hover_icon_on_border = true
}

# ============================================================================
# DECORATION
# ============================================================================
decoration {
    rounding = 5              # Matches aerospace accordion-padding

    blur {
        enabled = true
        size = 3
        passes = 1
        new_optimizations = true
    }

    drop_shadow = true
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = rgba(1a1a1aee)
}

# ============================================================================
# ANIMATIONS
# ============================================================================
animations {
    enabled = true

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

# ============================================================================
# INPUT CONFIGURATION
# ============================================================================
input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1  # Matches aerospace mouse-follows-focus behavior

    touchpad {
        natural_scroll = true
    }

    sensitivity = 0
}

# ============================================================================
# GESTURES
# ============================================================================
gestures {
    workspace_swipe = true
}

# ============================================================================
# LAYOUTS
# ============================================================================
dwindle {
    pseudotile = true
    preserve_split = true
    no_gaps_when_only = false
}

master {
    new_status = master
}

# ============================================================================
# WORKSPACE DEFINITIONS
# ============================================================================
# Named workspaces - Hyprland uses numeric IDs, but we can create special ones
# Mapping your letter-based workspaces to numbers with names:
# 1 = 1
# 2 = 2
# 3 = B (Browser)
# 4 = E (File Explorer)
# 5 = M (Music)
# 6 = N (Notes)
# 7 = D (Databases)
# 8 = T (Terminal)
# 9 = V (VSCode)
# 10 = C (Cursor)
# 11 = W (Work)
# 12 = I (Alt-browser)

# ============================================================================
# WINDOW RULES - Auto-assign apps to workspaces
# ============================================================================
# Terminal (WezTerm)
windowrulev2 = workspace 8, class:^(org.wezfurlong.wezterm)$
windowrulev2 = workspace 8, class:^(Alacritty)$
windowrulev2 = workspace 8, class:^(kitty)$

# Browser (Firefox)
windowrulev2 = workspace 3, class:^(firefox)$
windowrulev2 = workspace 3, class:^(Firefox)$

# Alt-browser (Zen Browser / Chrome)
windowrulev2 = workspace 12, class:^(zen-alpha)$
windowrulev2 = workspace 12, class:^(zen)$
windowrulev2 = workspace 12, class:^(google-chrome)$

# File Explorer
windowrulev2 = workspace 4, class:^(thunar)$
windowrulev2 = workspace 4, class:^(nemo)$
windowrulev2 = workspace 4, class:^(nautilus)$
windowrulev2 = workspace 4, class:^(dolphin)$

# VSCode
windowrulev2 = workspace 9, class:^(Code)$
windowrulev2 = workspace 9, class:^(code-url-handler)$

# Cursor
windowrulev2 = workspace 10, class:^(cursor)$
windowrulev2 = workspace 10, title:^(Cursor)$

# Music (Spotify)
windowrulev2 = workspace 5, class:^(Spotify)$
windowrulev2 = workspace 5, class:^(spotify)$

# Databases (pgAdmin, DBeaver, etc.)
windowrulev2 = workspace 7, class:^(pgadmin4)$
windowrulev2 = workspace 7, class:^(dbeaver)$

# Notes (Obsidian)
windowrulev2 = workspace 6, class:^(obsidian)$

# Work (Slack, Teams)
windowrulev2 = workspace 11, class:^(Slack)$
windowrulev2 = workspace 11, class:^(teams)$

# ============================================================================
# KEYBINDINGS
# ============================================================================
# Main modifier: ALT (to match your aerospace config)
$mainMod = ALT

# ============================================================================
# FOCUS NAVIGATION (vim keys)
# ============================================================================
bind = $mainMod, h, movefocus, l  # focus left
bind = $mainMod, j, movefocus, d  # focus down
bind = $mainMod, k, movefocus, u  # focus up
bind = $mainMod, l, movefocus, r  # focus right

# ============================================================================
# MOVE WINDOWS (Alt + Shift + vim keys)
# ============================================================================
bind = $mainMod SHIFT, h, movewindow, l  # move left
bind = $mainMod SHIFT, j, movewindow, d  # move down
bind = $mainMod SHIFT, k, movewindow, u  # move up
bind = $mainMod SHIFT, l, movewindow, r  # move right

# ============================================================================
# RESIZE WINDOWS (Alt + Shift + minus/equal)
# ============================================================================
bind = $mainMod SHIFT, minus, resizeactive, -50 0
bind = $mainMod SHIFT, equal, resizeactive, 50 0

# Alternative: Enter resize mode with Alt+r for more control
bind = $mainMod, r, submap, resize
submap = resize
binde = , h, resizeactive, -50 0
binde = , l, resizeactive, 50 0
binde = , k, resizeactive, 0 -50
binde = , j, resizeactive, 0 50
bind = , escape, submap, reset
bind = , return, submap, reset
submap = reset

# ============================================================================
# LAYOUT TOGGLES
# ============================================================================
bind = $mainMod, slash, togglesplit      # Toggle split direction (tiles horizontal/vertical)
bind = $mainMod SHIFT, f, fullscreen, 0  # Fullscreen
bind = $mainMod CTRL, f, togglefloating  # Toggle floating

# ============================================================================
# WORKSPACE SWITCHING
# ============================================================================
# Numeric workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2

# Named workspaces (letter keys)
bind = $mainMod, b, workspace, 3   # Browser
bind = $mainMod, e, workspace, 4   # File Explorer
bind = $mainMod, m, workspace, 5   # Music
bind = $mainMod, n, workspace, 6   # Notes
bind = $mainMod, d, workspace, 7   # Databases
bind = $mainMod, t, workspace, 8   # Terminal
bind = $mainMod, v, workspace, 9   # VSCode
bind = $mainMod, c, workspace, 10  # Cursor
bind = $mainMod, w, workspace, 11  # Work
bind = $mainMod, i, workspace, 12  # Alt-browser

# Workspace back-and-forth (Alt + Tab)
bind = $mainMod, tab, workspace, previous

# ============================================================================
# MOVE WINDOWS TO WORKSPACES (Alt + Shift + key)
# ============================================================================
# Numeric workspaces
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2

# Named workspaces
bind = $mainMod SHIFT, b, movetoworkspace, 3   # Browser
bind = $mainMod SHIFT, e, movetoworkspace, 4   # File Explorer
bind = $mainMod SHIFT, m, movetoworkspace, 5   # Music
bind = $mainMod SHIFT, n, movetoworkspace, 6   # Notes
bind = $mainMod SHIFT, d, movetoworkspace, 7   # Databases
bind = $mainMod SHIFT, t, movetoworkspace, 8   # Terminal
bind = $mainMod SHIFT, v, movetoworkspace, 9   # VSCode
bind = $mainMod SHIFT, c, movetoworkspace, 10  # Cursor
bind = $mainMod SHIFT, w, movetoworkspace, 11  # Work
bind = $mainMod SHIFT, i, movetoworkspace, 12  # Alt-browser

# ============================================================================
# SERVICE MODE (Alt + Shift + semicolon)
# ============================================================================
bind = $mainMod SHIFT, semicolon, submap, service
submap = service

# ESC - Reload config
bind = , escape, exec, hyprctl reload
bind = , escape, submap, reset

# r - Reset layout (close all but current)
bind = , r, exec, hyprctl dispatch killactive
bind = , r, submap, reset

# f - Toggle floating
bind = , f, togglefloating
bind = , f, submap, reset

# backspace - Close all windows but current
bind = , backspace, exec, ~/.config/hypr/scripts/close-all-but-current.sh
bind = , backspace, submap, reset

# Return to main mode
bind = , return, submap, reset

submap = reset

# ============================================================================
# MOUSE BINDINGS
# ============================================================================
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# ============================================================================
# MISC SETTINGS
# ============================================================================
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    vrr = 0
    enable_swallow = true
    swallow_regex = ^(wezterm|kitty|Alacritty)$
}

# ============================================================================
# DEBUGGING
# ============================================================================
# Uncomment these if you need to debug
# debug {
#     disable_logs = false
# }
